<?xml version="1.0" encoding="utf-8" ?>
<database Name="otrs">

<!-- Fix bug#8490 - no history record for title update -->
<Insert Table="ticket_history_type">
    <Data Key="name" Type="Quote">TitleUpdate</Data>
    <Data Key="valid_id">1</Data>
    <Data Key="create_by">1</Data>
    <Data Key="create_time">current_timestamp</Data>
    <Data Key="change_by">1</Data>
    <Data Key="change_time">current_timestamp</Data>
</Insert>

<TableAlter Name="dynamic_field_value">

    <!-- rename index -->
    <IndexDrop Name="index_search_date"/>
    <IndexCreate Name="dynamic_field_value_search_date">
        <IndexColumn Name="field_id"/>
        <IndexColumn Name="value_date"/>
    </IndexCreate>

    <!-- rename index -->
    <IndexDrop Name="index_search_int"/>
    <IndexCreate Name="dynamic_field_value_search_int">
        <IndexColumn Name="field_id"/>
        <IndexColumn Name="value_int"/>
    </IndexCreate>

    <!-- rename and change index -->
    <IndexDrop Name="index_field_values"/>
    <IndexCreate Name="dynamic_field_value_field_values">
        <IndexColumn Name="object_id"/>
    </IndexCreate>

</TableAlter>

<TableAlter Name="article">
    <IndexDrop Name="article_message_id"/>
    <ColumnAdd Name="a_message_id_md5" Required="false" Size="32" Type="VARCHAR"/>
    <IndexCreate Name="article_message_id_md5">
        <IndexColumn Name="a_message_id_md5"/>
    </IndexCreate>
</TableAlter>
<TableAlter Name="article_search">
    <IndexDrop Name="article_search_message_id"/>
    <ColumnDrop Name="a_message_id"/>
</TableAlter>

</database>
